(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58f1ba09"],{"0325":function(t,e,i){},"3b6a":function(t,e,i){"use strict";i("a481"),i("6762"),i("2fdb");var n=i("2b0e");n["default"].directive("dialogDrag",{bind:function(t,e,i,n){var a=t.querySelector(".el-dialog__header"),r=t.querySelector(".el-dialog");a.style.cssText+=";cursor:move;",r.style.cssText+=";top:0px;";var s=function(){return window.document.currentStyle?function(t,e){return t.currentStyle[e]}:function(t,e){return getComputedStyle(t,!1)[e]}}();a.onmousedown=function(t){var e=t.clientX-a.offsetLeft,i=t.clientY-a.offsetTop,n=document.body.clientWidth,o=document.documentElement.clientHeight,c=r.offsetWidth,l=r.offsetHeight,u=r.offsetLeft,d=n-r.offsetLeft-c,g=r.offsetTop,m=o-r.offsetTop-l,p=s(r,"left"),f=s(r,"top");p.includes("%")?(p=+document.body.clientWidth*(+p.replace(/\%/g,"")/100),f=+document.body.clientHeight*(+f.replace(/\%/g,"")/100)):(p=+p.replace(/\px/g,""),f=+f.replace(/\px/g,"")),document.onmousemove=function(t){var n=t.clientX-e,a=t.clientY-i;-n>u?n=-u:n>d&&(n=d),-a>g?a=-g:a>m&&(a=m),r.style.cssText+=";left:".concat(n+p,"px;top:").concat(a+f,"px;")},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null}}}})},"4c12":function(t,e,i){"use strict";var n=i("5e9d"),a=i.n(n);a.a},"5e9d":function(t,e,i){},"65d8":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAAmCAYAAAEXVjPuAAAABGdBTUEAALGPC/xhBQAAAllJREFUaAXtmLFOwzAQhhskhg5IjMx0RvACSCyMzIwIFl6IgRVeAB6gL8DM1hkmusDIQPgv5CJz2M7ZsRtH4qSTHdv/ff6dJq06m8VEjZghd6S4meBB88Ls8zxVaKIb8HWw8tw6TyWaia7TLpPXDY/m/ky0AutExZPa1lndVYAEFL/mf4bEYLvCN9cVMReZ/W5BX4dEfWuC51FzP0Z01Vq4V4shYNF6mKhFL11VnCRMPLrEThFTbOJekU2sFlnE0Nb606MCEDwg37jYaC02wfcf3fo220YEiGBhR6bdmQqERbvIA21R2zoViIRYuECa4XxKBoGkGER+shjuBWOR+WEgTdw9gtALTgZSOH4mG0bEOZIgeQ2AdJwHJMFDrrHpa+Q8+Ms7FArIFzQNJyvMBNEms8EkCKwjAiYPAiHNOEwOoYIgFATCbk6H2lQ5wqJ3JMc8Bgqx7uiYYrRBQDWovaHbBoi7KmAQiI8MomBgFCgGOAgUAkwC0gCTgnqAuo83Fwlp4cL2ocFwE+nfdShrA6YH8SkIYD4QA0tvcSAXyE8kxwqdvdL37d0fDNBvZ/mgsMEnr7jUyR5TZG6NXJS6f+u+lKam9Zz+m7Le6wIHk94pFDtDfiA56H8l1W+8lGcDpu/tR3ujF4X+mcLiY1I5Yonx7CbBSGvKPHEUv3OY4+EsJrOaEgbpd5b8V4TNcZvE5MZMmQapD3A2k6OZymmyGFMpTRZraojJyZiKNAl/1gj7npLwTV1j65oXDzuchil5eD0mRzWV7J9lmNyC8UvkCfIVeVNV1Qva0eIbDsLBOpJ6XroAAAAASUVORK5CYII="},"9bc6":function(t,e,i){"use strict";i.d(e,"h",(function(){return r})),i.d(e,"d",(function(){return s})),i.d(e,"f",(function(){return o})),i.d(e,"b",(function(){return c})),i.d(e,"g",(function(){return l})),i.d(e,"c",(function(){return u})),i.d(e,"e",(function(){return d})),i.d(e,"a",(function(){return g}));var n=i("b775"),a=i("9a6f");function r(t){return Object(n["a"])({url:a["a"].blogLink,method:"post",data:t})}function s(){return Object(n["a"])({url:a["a"].blogLink,method:"get"})}function o(t){return Object(n["a"])({url:a["a"].blogLink,method:"put",data:t})}function c(t){return Object(n["a"])({url:a["a"].blogLink,method:"delete",params:t})}function l(t){return Object(n["a"])({url:a["a"].blogBanner,method:"post",data:t})}function u(){return Object(n["a"])({url:a["a"].blogBanner,method:"get"})}function d(t){return Object(n["a"])({url:a["a"].blogBanner,method:"put",data:t})}function g(t){return Object(n["a"])({url:a["a"].blogBanner,method:"delete",params:t})}},"9f24":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"图片库",visible:t.dialogVisible,width:"840px","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-container",{staticStyle:{height:"450px",border:"none","line-height":"16px"}},[n("el-aside",{staticClass:"img_menu",staticStyle:{"font-size":"14px",padding:"0px","margin-top":"18px",background:"white"},attrs:{width:"150px"}},[n("div",{class:{img_menu_xuanzhong:-1==t.searchSelectedGroup},staticStyle:{"margin-left":"12px",cursor:"pointer"},attrs:{id:-1},on:{click:function(e){return t.selectGroup(-1)},mouseover:function(e){return t.changeActive(e)},mouseout:function(e){return t.removeActive(e)}}},[t._v("\n        全部图片\n      ")]),t._v(" "),n("div",{class:{img_menu_xuanzhong:0==t.searchSelectedGroup},staticStyle:{"margin-left":"12px",cursor:"pointer"},attrs:{id:0},on:{click:function(e){return t.selectGroup(0)},mouseover:function(e){return t.changeActive(e)},mouseout:function(e){return t.removeActive(e)}}},[t._v("\n        未分组\n      ")]),t._v(" "),t._l(t.groupList,(function(e,i){return n("div",{key:i,class:{img_menu_xuanzhong:t.searchSelectedGroup==e.id},staticStyle:{cursor:"pointer"},attrs:{id:e.id},on:{click:function(i){return t.selectGroup(e.id)},mouseover:function(e){return t.changeActive(e)},mouseout:function(e){return t.removeActive(e)}}},[n("a",{staticClass:"groupTextHidden",staticStyle:{cursor:"pointer",position:"absolute",left:"0.6rem"},on:{click:function(i){return t.editGroupText(e)}}},[n("i",{staticClass:"el-icon-edit"})]),t._v(" "),n("span",{staticStyle:{"margin-left":"7px"}},[t._v(" "+t._s(e.name))]),t._v(" "),n("a",{staticClass:"groupTextHidden",staticStyle:{float:"right",cursor:"pointer"},on:{click:function(i){return t.delGroupText(e)}}},[n("i",{staticClass:"el-icon-delete"})])])})),t._v(" "),n("div",{staticStyle:{"margin-left":"12px","text-decoration":"underline"},on:{click:function(e){return t.newGroup()}}},[n("a",[t._v("新增分组")])])],2),t._v(" "),n("el-container",[n("el-header",{staticStyle:{height:"36px","font-size":"12px"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-dropdown",{attrs:{trigger:"click"},on:{command:t.mvImgsGroup}},[n("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("\n                移动至\n                "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{disabled:""}},[t._v("请选择分组")]),t._v(" "),t._l(t.groupList,(function(e,i){return n("el-dropdown-item",{key:i,attrs:{id:e.id,command:e.id}},[t._v(t._s(e.name))])}))],2)],1),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.delImgs}},[t._v("删除")])],1),t._v(" "),n("el-col",{staticStyle:{"text-align":"right","padding-right":"30px"},attrs:{span:12}},[n("el-upload",{staticClass:"upload-demo",attrs:{"show-file-list":!1,multiple:"",limit:3,action:"","http-request":t.httpRequest,"on-success":t.handleAvatarSuccess}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"只能上传jpg/png文件，且不超过500kb",placement:"top-start"}},[n("el-button",{attrs:{size:"small"}},[t._v("点击上传")])],1)],1)],1)],1)],1),t._v(" "),n("el-main",{directives:[{name:"loading",rawName:"v-loading",value:t.imgLoadingShow,expression:"imgLoadingShow"}]},t._l(t.imgList,(function(e,a){return n("div",{key:a,staticClass:"block",staticStyle:{width:"23%",padding:"2px"},attrs:{id:e.id,imgUrl:e.url},on:{click:function(e){return t.clickImgs(e)}}},[n("div",{staticClass:"img-paixun"},[n("el-image",{staticStyle:{width:"118px",height:"130px"},attrs:{src:e.url}}),t._v(" "),n("div",{staticClass:"demonstration",staticStyle:{"text-align":"center",overflow:"hidden",height:"16px"}},[t._v("\n              "+t._s(e.name)+"\n            ")]),t._v(" "),n("div",{staticClass:"select-mask"},[n("img",{attrs:{src:i("65d8")}})])],1)])})),0),t._v(" "),n("el-footer",{staticStyle:{height:"40px","text-align":"center"}},[n("div",{staticClass:"block"},[n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticStyle:{"margin-top":"20px",padding:"30px 16px"},attrs:{total:t.total,small:"",page:t.pageIndex,limit:t.pageSize},on:{"update:page":function(e){t.pageIndex=e},"update:limit":function(e){t.pageSize=e},pagination:t.getImgsList}})],1)])],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){return t.dialogVisibleMethod(0)}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.dialogVisibleMethod(1)}}},[t._v("确 定")])],1),t._v(" "),n("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"290px",title:t.GroupTextTitle,visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[n("el-input",{staticStyle:{margin:"20px",width:"250px"},model:{value:t.newEditGroupText,callback:function(e){t.newEditGroupText=e},expression:"newEditGroupText"}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",loading:t.newEditGroupTextLoadingbut},on:{click:function(e){return t.groupNewEdit()}}},[t._v("确 定")]),t._v(" "),n("el-button",{on:{click:function(e){t.innerVisible=!1}}},[t._v("取 消")])],1)],1)],1)},a=[],r=(i("7f7f"),i("ac6a"),i("d161")),s=(i("5c96"),i("3b6a"),{name:"ImgLibrary",props:["dialogVisible"],data:function(){return{GroupTextTitle:"新增分组",newEditGroupText:"",newEditGroupId:0,innerVisible:!1,src:"",groupList:[],imgList:[],selectedImgs:[],searchSelectedGroup:-1,uploadImg:{},pageIndex:1,pageSize:10,total:0,imgLoadingShow:!0,newEditGroupTextLoadingbut:!1}},mounted:function(){},created:function(){this.getImgsList(),this.getGroupText()},methods:{getImgsList:function(){var t=this;Object(r["e"])({cate_id:this.searchSelectedGroup,page:this.pageIndex,page_size:this.pageSize}).then((function(e){var i=[];e.data.data.forEach((function(t,e){i[e]={id:t.id,url:t.domain+t.url,name:t.url}})),t.total=e.data.total,t.imgList=i,t.imgLoadingShow=!1}))},getGroupText:function(){var t=this;Object(r["d"])().then((function(e){t.groupList=e.data}))},dialogVisibleMethod:function(t){0==t&&(this.selectedImgs=[]),this.$emit("changeDialogVisible",{status:t,selectedImgs:this.selectedImgs})},newGroup:function(){this.GroupTextTitle="新增分组",this.newEditGroupText="",this.newEditGroupId=0,this.innerVisible=!0},groupNewEdit:function(){var t=this;if(""!=this.newEditGroupText.trim()&&void 0!=this.newEditGroupText){var e=r["a"];0!=this.newEditGroupId&&(e=r["g"]),this.newEditGroupTextLoadingbut=!0,e({id:this.newEditGroupId,name:this.newEditGroupText,sort:50}).then((function(e){200==e.code?(t.newEditGroupTextLoadingbut=!1,t.innerVisible=!1,t.$message({message:"操作成功",type:"success"}),t.getGroupText()):t.$message.error(e.msg)}))}else this.$message.error("分组名称为空")},selectGroup:function(t){this.searchSelectedGroup=t,this.selectedImgs=[],this.getImgsList()},editGroupText:function(t){this.GroupTextTitle="编辑分组信息",this.newEditGroupText=t.name,this.newEditGroupId=t.id,this.innerVisible=!0},delGroupText:function(t){var e=this;this.$confirm("此操作将永久删除该分组,该分组下的图片将转移到未分组, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["b"])({id:t.id}).then((function(t){200==t.code?e.getGroupText():e.$message.error(t.msg)})),e.$message({message:"操作成功",type:"success"})})).catch((function(){e.$message({type:"info",message:"已撤销操作"})}))},changeActive:function(t){t.currentTarget.className="img_menu_xuanzhong groupField"},removeActive:function(t){var e=t.currentTarget.getAttribute("id");e!=this.searchSelectedGroup&&(t.currentTarget.className="")},httpRequest:function(t){var e=this,i=this,n=t.file;if(a=!1,"image/jpeg"==n.type||"image/JPG"==n.type||"image/png"==n.type)var a=!0;if(a)if(n.size/1024/1024<2){var s=new FileReader;new Image;n&&s.readAsDataURL(n),s.onload=function(t){Object(r["h"])({data:t.target.result,cate_id:0}).then((function(t){200==t.code?(e.msgSuccess(t.msg),i.getImgsList()):e.msgError(t.msg)}))}}else this.msgError("上传产品图片大小不能超过 2MB!");else this.msgError("上传产品图片只能是 JPG/PNG/JPEG 格式!")},handleAvatarSuccess:function(){console.log("handleAvatarSuccess")},clickImgs:function(t){var e=t.currentTarget.getAttribute("imgurl"),i=t.currentTarget.getAttribute("id");if(-1==t.currentTarget.className.indexOf("action"))t.currentTarget.className="block action",this.selectedImgs.push({id:i,imgurl:e});else{t.currentTarget.className="block";for(var n=0;n<this.selectedImgs.length;n++)if(this.selectedImgs[n].id==i){this.selectedImgs.splice(n,1);break}}},mvImgsGroup:function(t){var e=this;if(""!=this.selectedImgs&&void 0!=this.selectedImgs){var i=[];this.selectedImgs.forEach((function(t,e){i[e]=t.id})),Object(r["f"])({id:i.join(","),cate_id:t}).then((function(t){200!=t.code&&e.$message.error(t.message),e.getImgsList()}))}else this.alertEmptyImgs()},delImgs:function(){var t=this;if(""!=this.selectedImgs&&void 0!=this.selectedImgs){var e=[];this.selectedImgs.forEach((function(t,i){e[i]=t.id})),Object(r["c"])({id:e.join(",")}).then((function(e){200!=e.code&&t.$message.error(e.message);var i=[];t.selectedImgs.forEach((function(t,e){i[e]=t.id})),t.msgSuccess("操作成功"),t.selectedImgs=[],t.getImgsList()}))}else this.alertEmptyImgs()},alertEmptyImgs:function(t){var e=this.$createElement;t=void 0==t?"失败信息":t,console.log(t),this.$message({message:e("p",null,[e("span",null,t),e("i",{style:"color: teal"},"  没有选中的图片")])})}}}),o=s,c=(i("4c12"),i("2877")),l=Object(c["a"])(o,n,a,!1,null,"67a5d892",null);e["a"]=l.exports},bf4b:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-button",{staticStyle:{margin:"10px",float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.getBanners()}}},[t._v("刷新数据")]),t._v(" "),i("el-button",{staticStyle:{margin:"10px",float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.saveData()}}},[t._v("新增数据")]),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,loading:t.listloading}},[i("el-table-column",{attrs:{label:"名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row,a=e.$index;return[t.currentEdit===a?i("el-input",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.finishEditClick(n)}},model:{value:n.title,callback:function(e){t.$set(n,"title",e)},expression:"row.title"}}):i("span",[t._v(t._s(n.title))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("div",{staticClass:"img_kuang",on:{click:function(e){return t.changeDialogVisibleState(n)}}},[""==n.img_uri?i("i",{staticClass:"el-icon-plus img_kuang_i"}):t._e(),t._v(" "),""!=n.img_uri?i("img",{staticClass:"avatar",staticStyle:{width:"100%",height:"100%",display:"block"},attrs:{src:n.img_uri}}):t._e()])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"跳转路径",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row,a=e.$index;return[t.currentEdit===a?i("el-input",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.finishEditClick(n)}},model:{value:n.jump_uri,callback:function(e){t.$set(n,"jump_uri",e)},expression:"row.jump_uri"}}):i("span",[t._v(t._s(n.jump_uri))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"是否显示",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(i){return t.handleStatusChange(e.row)}},model:{value:e.row.is_show,callback:function(i){t.$set(e.row,"is_show",i)},expression:"scope.row.is_show"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.currentEdit===e.$index?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.finishEditClick(e.row)}}},[t._v("完成")]):i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.editClick(e)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.handleDelClick(e.row,e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("ImgLibrary",{attrs:{"dialog-visible":t.dialogVisible},on:{changeDialogVisible:t.changeDialogVisible}})],1)},a=[],r=(i("ac6a"),i("9f24")),s=i("9bc6"),o={name:"",components:{ImgLibrary:r["a"]},data:function(){return{selectRow:"",dialogVisible:!1,listloading:!1,currentEdit:-1,tableData:[],dialogImageUrl:"",dialogVisibleUrlState:!0}},created:function(){this.listloading=!0,this.getBanners()},methods:{getBanners:function(){var t=this,e=[];Object(s["c"])().then((function(i){i.data.forEach((function(t,i){e[i]={title:t.title,jump_uri:t.jump_uri,img_uri:t.img_uri,id:t.id,is_show:1==t.is_show?"1":"0"}})),t.tableData=e,console.log("this.tableData ",t.tableData,e)}))},handleDelClick:function(t,e){var i=this;if(""==t.id)return this.currentEdit=-1,void this.tableData.splice(e,1);this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["a"])({id:t.id}).then((function(t){i.responseMessage(t),i.getBanners()}))})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))},editClick:function(t){-1==this.currentEdit?this.currentEdit=t.$index:this.msgError("存在未关闭的编辑框")},finishEditClick:function(t){var e=this;if(""!=t.img_uri&&""!=t.jump_uri&&""!=t.title&&""!=t.is_show){var i="";i=""!=t.id?Object(s["e"])(t):Object(s["g"])(t),i.then((function(t){e.responseMessage(t)})),this.currentEdit=-1}else this.msgError("请填写完整数据")},saveData:function(){if(-1==this.currentEdit){var t={id:"",title:"",jump_uri:"",img_uri:"",is_show:1};this.currentEdit=this.tableData.length,this.tableData.push(t)}else this.msgError("存在未关闭的编辑框")},handleStatusChange:function(t){var e=this;""!=t.id&&Object(s["e"])(t).then((function(t){e.responseMessage(t)}))},changeDialogVisibleState:function(t){this.dialogVisible=!0,this.selectRow=t},changeDialogVisible:function(t){this.dialogVisible=!1,0!=t.selectedImgs.length&&0!=t.status&&(this.selectRow.img_uri=t.selectedImgs[0].imgurl),1==t.status&&0==t.selectedImgs.length&&(this.selectRow.img_uri="")}}},c=o,l=(i("d686"),i("2877")),u=Object(l["a"])(c,n,a,!1,null,null,null);e["default"]=u.exports},d161:function(t,e,i){"use strict";i.d(e,"h",(function(){return r})),i.d(e,"e",(function(){return s})),i.d(e,"f",(function(){return o})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return l})),i.d(e,"g",(function(){return u})),i.d(e,"a",(function(){return d})),i.d(e,"b",(function(){return g}));var n=i("b775"),a=i("9a6f");function r(t){return Object(n["a"])({url:a["a"].uploadImgs,method:"post",data:t})}function s(t){return Object(n["a"])({url:a["a"].searchImgs,method:"get",params:t})}function o(t){return Object(n["a"])({url:a["a"].mvImgs,method:"put",data:t})}function c(t){return Object(n["a"])({url:a["a"].delImgs,method:"delete",params:t})}function l(t){return Object(n["a"])({url:a["a"].getImgsGroup,method:"get",data:t})}function u(t){return Object(n["a"])({url:a["a"].updateImgsGroup,method:"put",data:t})}function d(t){return Object(n["a"])({url:a["a"].addImgsGroup,method:"post",data:t})}function g(t){return Object(n["a"])({url:a["a"].delImgsGroup,method:"DELETE",data:t})}},d686:function(t,e,i){"use strict";var n=i("0325"),a=i.n(n);a.a}}]);